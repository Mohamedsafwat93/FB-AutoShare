<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Server Dashboard 2025</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body { font-family: 'Segoe UI', sans-serif; background: #0d0d0d; color: #fff; overflow-x: hidden; }

    @keyframes textGradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    @keyframes headerGlow {
        0%, 100% { text-shadow: 0 0 20px rgba(0, 208, 255, 0.5), 0 0 40px rgba(0, 255, 213, 0.2), 0 0 60px rgba(0, 132, 208, 0.1); }
        50% { text-shadow: 0 0 30px rgba(0, 208, 255, 0.8), 0 0 50px rgba(0, 255, 213, 0.4), 0 0 80px rgba(0, 132, 208, 0.3); }
    }
    
    @keyframes sparkle {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
    }
    
    @keyframes slideDown {
        from { opacity: 0; transform: translateY(-30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .header-wrapper {
        text-align: center;
        margin: 30px 0 20px 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
        padding: 25px 20px;
        background: linear-gradient(135deg, rgba(0, 208, 255, 0.08), rgba(0, 255, 213, 0.05));
        border-radius: 20px;
        border: 2px solid rgba(0, 208, 255, 0.3);
        position: relative;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 208, 255, 0.15), inset 0 0 20px rgba(0, 255, 213, 0.05);
        animation: headerSlideIn 1s ease-out;
    }
    
    @keyframes headerSlideIn {
        from { opacity: 0; transform: translateY(-30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .header-wrapper::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -10%;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(0, 208, 255, 0.1), transparent);
        border-radius: 50%;
        filter: blur(60px);
        pointer-events: none;
        animation: floatGlow 8s ease-in-out infinite;
    }
    
    @keyframes floatGlow {
        0%, 100% { transform: translate(0, 0); }
        50% { transform: translate(20px, -20px); }
    }
    
    .profile-image-container {
        position: relative;
        height: 140px;
        width: 140px;
        border-radius: 20px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #1877f2, #0a66c2);
        border: 3px solid #00ffd5;
        box-shadow: 0 0 25px rgba(0, 208, 255, 0.4), 0 0 50px rgba(0, 255, 213, 0.2), inset 0 0 15px rgba(0, 208, 255, 0.15);
        animation: profileGlow 3s ease-in-out infinite;
        backdrop-filter: blur(10px);
        position: relative;
        flex-shrink: 0;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .profile-image-container:hover {
        transform: scale(1.15) translateY(-10px);
        box-shadow: 0 0 40px rgba(0, 208, 255, 0.7), 0 0 80px rgba(0, 255, 213, 0.4), 0 0 120px rgba(0, 208, 255, 0.3), inset 0 0 25px rgba(0, 208, 255, 0.3);
        border-color: #00ffff;
        animation: profileHoverGlow 0.6s ease-in-out infinite;
    }
    
    @keyframes profileGlow {
        0%, 100% { box-shadow: 0 0 25px rgba(0, 208, 255, 0.4), 0 0 50px rgba(0, 255, 213, 0.2), inset 0 0 15px rgba(0, 208, 255, 0.15); }
        50% { box-shadow: 0 0 35px rgba(0, 208, 255, 0.6), 0 0 70px rgba(0, 255, 213, 0.4), inset 0 0 20px rgba(0, 208, 255, 0.25); }
    }
    
    @keyframes profileHoverGlow {
        0%, 100% { box-shadow: 0 0 40px rgba(0, 208, 255, 0.7), 0 0 80px rgba(0, 255, 213, 0.4), 0 0 120px rgba(0, 208, 255, 0.3), inset 0 0 25px rgba(0, 208, 255, 0.3); }
        50% { box-shadow: 0 0 50px rgba(0, 208, 255, 0.9), 0 0 100px rgba(0, 255, 213, 0.6), 0 0 150px rgba(0, 208, 255, 0.5), inset 0 0 30px rgba(0, 255, 213, 0.4); }
    }
    
    .profile-image-inner {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
    }
    
    .profile-image-inner img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 20px;
        display: block;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .profile-image-container:hover .profile-image-inner img {
        filter: brightness(1.2) drop-shadow(0 0 20px rgba(0, 255, 213, 0.6));
        transform: scale(1.05);
    }
    
    @media (max-width: 768px) {
        .profile-image-container { height: 100px; width: 100px; }
    }
    
    h1 { 
        text-align: center; 
        margin: 0; 
        font-size: 2.5rem; 
        font-weight: 900; 
        letter-spacing: 2.5px;
        background: linear-gradient(135deg, #00d0ff, #00ffd5, #0084d0, #1877f2, #00d0ff);
        background-size: 300% 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: textGradientShift 6s ease infinite, headerGlow 3s ease-in-out infinite;
        filter: drop-shadow(0 0 20px rgba(0, 208, 255, 0.4));
        position: relative;
        z-index: 1;
        text-shadow: 0 0 30px rgba(0, 208, 255, 0.2);
    }
    
    @media (min-width: 768px) { 
        h1 { font-size: 3.5rem; letter-spacing: 3px; }
    }
    
    @media (min-width: 1024px) {
        h1 { font-size: 4rem; }
    }
    
    h1::after {
        content: '‚ú®';
        display: inline-block;
        margin-left: 15px;
        font-size: 0.8em;
        animation: spin 4s linear infinite;
    }
    
    @keyframes spin {
        0%, 100% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.1); }
    }
    
    .stats { width: 100%; margin: 15px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; }
    
    @media (min-width: 768px) {
        .stats { width: 94%; margin: 25px auto; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
    }
    
    .stat-card { background: #1a1a1a; border-left: 4px solid #00d0ff; padding: 10px; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
    .stat-card h3 { margin: 0 0 8px 0; color: #00ffd5; font-size: 14px; }
    .stat-card p { margin: 6px 0; font-size: 10px; color: #aaa; line-height: 1.4; }
    
    @media (min-width: 768px) {
        .stat-card { padding: 15px; }
        .stat-card h3 { font-size: 16px; margin: 0 0 10px 0; }
        .stat-card p { margin: 8px 0; font-size: 12px; line-height: 1.5; }
    }
    
    #container { width: 100%; margin: auto; display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px; }
    
    @media (min-width: 768px) {
        #container { width: 94%; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 35px; }
    }
    
    .card { background: #121212; border-radius: 12px; padding: 15px; box-shadow: 0 0 25px #000 inset; }
    .card h2 { text-align: center; font-size: 18px; margin-bottom: 8px; color: #00ffd5; }
    canvas { height: 180px !important; width: 100% !important; }
    
    @media (min-width: 768px) {
        .card { border-radius: 18px; padding: 20px; }
        .card h2 { font-size: 22px; margin-bottom: 10px; }
        canvas { height: 220px !important; }
    }
    
    #services { grid-column: span 1; }
    #facebook-card { grid-column: span 1; order: 999; }
    
    .main-layout { display: grid; grid-template-columns: 1fr; gap: 15px; width: 100%; margin: auto; margin-top: 20px; }
    
    @media (min-width: 768px) {
        .main-layout { grid-template-columns: 2fr 1fr; gap: 25px; width: 94%; margin-top: 35px; }
    }
    
    .services-column, .facebook-column { grid-column: 1; }
    
    @media (min-width: 768px) {
        .services-column { grid-column: 1; }
        .facebook-column { grid-column: 2; }
    }
    
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 10px 8px; text-align: center; background: #1b1b1b; border-bottom: 1px solid #333; font-size: 11px; word-break: break-word; }
    
    @media (min-width: 768px) {
        th, td { padding: 16px 14px; font-size: 13px; }
    }
    
    .file-input-wrapper { display: flex; flex-direction: column; gap: 8px; margin: 8px 0; justify-content: center; }
    
    @media (min-width: 768px) {
        .file-input-wrapper { flex-direction: row; gap: 12px; margin: 12px 0; flex-wrap: wrap; }
    }
    
    .file-input-box { padding: 12px 8px; min-height: 60px; font-size: 0.8rem; }
    
    @media (min-width: 768px) {
        .file-input-box { padding: 18px 12px; min-height: 85px; font-size: 1rem; }
    }
    
    * { box-sizing: border-box; }
    html { font-size: 14px; }
    @media (min-width: 768px) {
        html { font-size: 16px; }
    }
    
    footer { 
        text-align: center; 
        margin: 30px 0 15px 0; 
        font-size: 0.9rem; 
        color: #00ffd5; 
        position: relative; 
        padding: 15px 0; 
        background: linear-gradient(135deg, rgba(0, 208, 255, 0.1), rgba(0, 255, 213, 0.05)); 
        border-top: 1px solid rgba(0, 208, 255, 0.3); 
        border-radius: 12px; 
        box-shadow: 0 4px 15px rgba(0, 208, 255, 0.2); 
        transition: all 0.3s ease; 
        animation: footerGlow 3s ease-in-out infinite; 
    }

    footer:hover { 
        box-shadow: 0 8px 25px rgba(0, 208, 255, 0.4); 
        transform: translateY(-3px); 
    }

    footer a { 
        color: #00ffff; 
        text-decoration: none; 
        font-weight: 600; 
        transition: color 0.3s ease; 
    }

    footer a:hover { 
        color: #ffffff; 
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.6); 
    }

    footer .heart { 
        color: #ff004c; 
        animation: pulse 1.5s ease-in-out infinite; 
    }

    @keyframes footerGlow {
        0%, 100% { box-shadow: 0 4px 15px rgba(0, 208, 255, 0.2); }
        50% { box-shadow: 0 6px 20px rgba(0, 208, 255, 0.4); }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    @media (max-width: 767px) {
        footer { 
            font-size: 0.8rem; 
            margin: 20px 0 10px 0; 
            padding: 10px 0; 
        }
    }
    
    .facebook-card-wrapper { background: linear-gradient(135deg, #121212 0%, #1a2a3a 100%); border-radius: 18px; padding: 20px; box-shadow: 0 0 25px #000 inset, 0 0 30px rgba(0, 208, 255, 0.2); animation: slideInCard 0.7s ease-out backwards; animation-delay: 0.8s; border: 2px solid transparent; background-clip: padding-box; transition: all 0.4s ease; }
    .facebook-card-wrapper h2 { text-align: center; font-size: 22px; margin-bottom: 10px; color: #00ffd5; animation: colorShift 3s ease-in-out infinite; text-shadow: 0 0 10px rgba(0, 208, 255, 0.3); }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 8px 10px; text-align: center; background: #1b1b1b; border-bottom: 1px solid #333; font-size: 11px; }
    th { 
        background: linear-gradient(135deg, #00aaff 0%, #00d0ff 50%, #00aaff 100%);
        background-size: 200% 200%;
        color: #000;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 10px;
        box-shadow: 0 2px 8px rgba(0, 170, 255, 0.3);
        border: 2px solid #00ffd5;
        animation: none;
        position: relative;
        overflow: hidden;
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
    }
    
    th:hover {
        background: linear-gradient(135deg, #00d0ff 0%, #00ffff 50%, #00d0ff 100%);
        box-shadow: 0 4px 15px rgba(0, 208, 255, 0.4);
        border-color: #00ffff;
        transform: translateY(-2px);
    }
    button { background: #ff004c; border: none; color: white; border-radius: 8px; cursor: pointer; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); display: block; margin-left: auto; margin-right: auto; font-weight: 600; }
    button:hover { background: #ff336d; transform: scale(1.08) translateY(-2px); box-shadow: 0 10px 25px rgba(255, 0, 76, 0.4); }
    button:active { transform: scale(0.96); }
    .control-buttons-container { display: flex; gap: 12px; justify-content: center; align-items: center; flex-wrap: wrap; padding: 15px; background: rgba(10, 10, 10, 0.8); border-radius: 12px; border: 1px solid #333; }
    .control-btn { padding: 8px 16px; border: 2px solid #0084d0; font-size: 11px; font-weight: 600; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); border-radius: 6px; background: linear-gradient(135deg, #0084d0, #0066aa); color: #fff; box-shadow: 0 4px 12px rgba(0, 132, 208, 0.3); cursor: pointer; white-space: nowrap; animation: buttonGlow 3s ease-in-out infinite; }
    .control-btn:hover { transform: translateY(-4px) scale(1.08); box-shadow: 0 8px 25px rgba(0, 208, 255, 0.6), inset 0 0 10px rgba(0, 255, 213, 0.2); border-color: #00ffff; background: linear-gradient(135deg, #00ffff, #00d0ff); }
    .control-btn:active { transform: translateY(-1px) scale(0.96); }
    .control-btn.cleanup { background: linear-gradient(135deg, #00ffd5, #00a8aa); box-shadow: 0 4px 12px rgba(0, 255, 213, 0.3); border-color: #00ffd5; }
    .control-btn.cleanup:hover { box-shadow: 0 8px 25px rgba(0, 255, 213, 0.6), inset 0 0 10px rgba(0, 255, 213, 0.3); border-color: #00ffff; background: linear-gradient(135deg, #00ffff, #00ffd5); transform: translateY(-4px) scale(1.08); }
    .social-container { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin: 30px 0; }
    .social-btn { padding: 12px 25px; border-radius: 25px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; transition: 0.3s ease; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); border: none; cursor: pointer; font-size: 14px; }
    .github-btn { background: linear-gradient(135deg, #333, #555); color: #fff; }
    .github-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(100, 100, 100, 0.6); }
    .facebook-btn { background: linear-gradient(135deg, #1877f2, #0a66c2); color: #fff; }
    .facebook-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(24, 119, 242, 0.6); }
    .youtube-btn { background: linear-gradient(135deg, #ff0000, #cc0000); color: #fff; }
    .youtube-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(255, 0, 0, 0.6); }
    .tiktok-btn { background: linear-gradient(135deg, #000000, #25f4ee); color: #fff; }
    .tiktok-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.8); }
    .instagram-btn { background: linear-gradient(135deg, #fd1d1d, #833ab4); color: #fff; }
    .instagram-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(253, 29, 29, 0.6); }
    .whatsapp-btn { background: linear-gradient(135deg, #25d366, #20ba5c); color: #fff; }
    .whatsapp-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6); }
    .connect-heading {
        display: inline-block;
        color: #00ffd5;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 700;
        text-decoration: none;
        background: linear-gradient(135deg, #00ffd5, #00d0ff, #00ffd5);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        padding: 8px 15px;
        border-radius: 8px;
        border: 1px solid #00ffd5;
        box-shadow: 0 0 12px rgba(0, 255, 213, 0.3), inset 0 0 8px rgba(0, 208, 255, 0.1);
        animation: connectGlow 3s ease-in-out infinite, colorShift 4s ease-in-out infinite;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
    }
    
    .connect-heading::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        animation: connectShine 3s infinite;
        z-index: -1;
    }
    
    .connect-heading:hover {
        transform: translateY(-2px) scale(1.1);
        box-shadow: 0 8px 20px rgba(0, 255, 213, 0.6), inset 0 0 12px rgba(0, 208, 255, 0.2), 0 0 18px rgba(0, 208, 255, 0.3);
        border-color: #00ffff;
        background: linear-gradient(135deg, #00ffff, #00ffd5, #00ffff);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .connect-heading:active {
        transform: translateY(-1px) scale(1.01);
        box-shadow: 0 4px 10px rgba(0, 255, 213, 0.4), inset 0 0 6px rgba(0, 208, 255, 0.15);
    }
    
    @keyframes connectGlow {
        0%, 100% {
            box-shadow: 0 0 20px rgba(0, 255, 213, 0.3), inset 0 0 15px rgba(0, 208, 255, 0.1);
        }
        50% {
            box-shadow: 0 0 35px rgba(0, 255, 213, 0.7), inset 0 0 25px rgba(0, 208, 255, 0.2), 0 0 50px rgba(0, 208, 255, 0.4);
        }
    }
    
    @keyframes connectShine {
        0% { left: -100%; }
        50% { left: 100%; }
        100% { left: 100%; }
    }
    footer { text-align: center; margin: 40px 0 20px 0; }
    .dropdown-toggle { background: linear-gradient(135deg, #1877f2, #0d5cb8); color: #fff; border: 2px solid #1877f2; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 4px 15px rgba(24, 119, 242, 0.3); }
    .dropdown-toggle:hover { background: linear-gradient(135deg, #0d5cb8, #1877f2); border-color: #00d0ff; box-shadow: 0 6px 20px rgba(0, 208, 255, 0.5); transform: translateY(-2px) scale(1.05); }
    .dropdown-content { display: none; position: relative; margin-top: 10px; }
    .dropdown-content.active { display: block; }
    .group-item { background: #1a1a1a; padding: 10px; margin: 5px 0; border-radius: 5px; border-left: 3px solid #1877f2; font-size: 12px; }
    .facebook-section { background: linear-gradient(135deg, #121212 0%, #1a2a2a 100%); padding: 20px; border-radius: 12px; margin: 20px 0; border: 2px solid #00d0ff; box-shadow: 0 0 20px rgba(0, 208, 255, 0.2), inset 0 0 15px rgba(0, 208, 255, 0.05); transition: all 0.4s ease; animation: fadeIn 0.8s ease-out; }
    .facebook-section h3 { color: #00ffd5; margin-top: 0; font-size: 18px; animation: colorShift 3s ease-in-out infinite; transition: all 0.3s ease; }
    .file-input-wrapper { display: flex; gap: 12px; margin: 12px 0; flex-wrap: wrap; justify-content: center; }
    .file-input-label { position: relative; cursor: pointer; flex: 1; min-width: 90px; max-width: 120px; }
    .file-input-label input[type="file"] { display: none; }
    .file-input-box { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 18px 12px; background: linear-gradient(135deg, #1a2a3a 0%, #0d1a2a 100%); border: 2px dashed #00d0ff; border-radius: 10px; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); color: #00ffd5; min-height: 85px; box-shadow: 0 0 15px rgba(0, 208, 255, 0.2); }
    .file-input-box.has-file { border: 2px solid #00ff88; background: linear-gradient(135deg, #1a3a2a 0%, #0d2a1a 100%); box-shadow: 0 0 20px rgba(0, 255, 136, 0.4); }
    .file-input-label:hover .file-input-box { background: linear-gradient(135deg, #1a4a5a 0%, #0d2a4a 100%); border-color: #00ffff; box-shadow: 0 0 25px rgba(0, 255, 255, 0.6), inset 0 0 15px rgba(0, 255, 255, 0.1); transform: translateY(-5px) scale(1.08); animation: borderGlow 2s ease-in-out infinite; }
    .file-input-label.drag-over .file-input-box { border-color: #00ffff; background: linear-gradient(135deg, #2a5a7a 0%, #1d3a5a 100%); box-shadow: 0 0 25px rgba(0, 255, 255, 0.7); border-style: solid; }
    .file-input-label input[type="file"]:focus + .file-input-box { border-color: #00ffff; box-shadow: 0 0 20px rgba(0, 208, 255, 0.8); }
    .file-input-box i { transition: all 0.3s ease; color: #00ffd5; font-size: 22px; margin-bottom: 5px; }
    .file-input-label:hover .file-input-box i { color: #00ffff; transform: scale(1.15) rotate(-5deg); }
    .file-label-text { font-size: 10px; color: #00ffd5; font-weight: 600; text-align: center; }
    .file-label-info { font-size: 8px; color: #888; margin-top: 4px; text-align: center; }
    .file-preview { width: 100%; height: 40px; border-radius: 8px; object-fit: cover; margin-top: 6px; border: 1px solid #00d0ff; display: none; }
    .file-info-box { width: 100%; padding: 6px; background: #0d0d0d; border-radius: 6px; margin-top: 6px; border: 1px solid #00ffd5; display: none; }
    .file-info-text { font-size: 8px; color: #00ffd5; margin: 3px 0; word-break: break-all; }
    .file-clear-btn { margin-top: 4px; padding: 3px 8px; background: #ff4444; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 9px; transition: 0.2s; display: none; }
    .file-clear-btn:hover { background: #ff6666; }
    .upload-progress-container { width: 100%; height: 6px; background: #0d0d0d; border-radius: 10px; margin: 12px 0; overflow: hidden; display: none; border: 1px solid #00d0ff; }
    .upload-progress-container.active { display: block; }
    .upload-progress-bar { height: 100%; background: linear-gradient(90deg, #00ff88 0%, #00ffaa 50%, #00ff88 100%); width: 0%; border-radius: 10px; transition: width 0.3s ease; box-shadow: 0 0 15px rgba(0, 255, 136, 0.6); }
    .upload-progress-text { font-size: 12px; color: #00ff88; text-align: center; margin-top: 5px; font-weight: 600; }
    .password-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); }
    .password-modal.active { display: flex; align-items: center; justify-content: center; }
    .password-modal-content { background: #1a1a1a; padding: 30px; border-radius: 12px; border: 2px solid #00ffd5; box-shadow: 0 0 30px rgba(0, 255, 213, 0.3); width: 90%; max-width: 400px; }
    .password-modal-content h3 { color: #00ffd5; margin-top: 0; font-size: 18px; }
    .password-input-field { width: 100%; padding: 12px; background: #0d0d0d; border: 2px solid #00d0ff; border-radius: 8px; color: #00ffd5; font-size: 16px; font-family: monospace; letter-spacing: 2px; box-sizing: border-box; transition: all 0.3s ease; box-shadow: 0 0 10px rgba(0, 208, 255, 0.2); }
    .password-input-field:focus { outline: none; border-color: #00ffff; box-shadow: 0 0 25px rgba(0, 255, 255, 0.7), inset 0 0 15px rgba(0, 255, 255, 0.1), 0 0 40px rgba(0, 208, 255, 0.3); animation: inputFocus 1s ease-in-out; }
    .password-modal-buttons { display: flex; gap: 10px; margin-top: 20px; }
    .password-modal-buttons button { flex: 1; padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: 0.3s; }
    .password-btn-submit { background: #1877f2; color: #fff; }
    .password-btn-submit:hover { background: #0d5cb8; }
    .password-btn-cancel { background: #333; color: #fff; }
    .password-btn-cancel:hover { background: #555; }
    
    /* ===== ANIMATIONS ===== */
    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slideInCard {
        from { opacity: 0; transform: translateY(30px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    
    @keyframes glowPulse {
        0%, 100% { box-shadow: 0 0 15px rgba(0, 208, 255, 0.3), 0 0 25px rgba(0, 255, 213, 0.1); }
        50% { box-shadow: 0 0 25px rgba(0, 208, 255, 0.6), 0 0 40px rgba(0, 255, 213, 0.3); }
    }
    
    @keyframes titleGlow {
        0%, 100% { color: #00ffd5; text-shadow: 0 0 5px rgba(0, 255, 213, 0.3); }
        50% { color: #00ffff; text-shadow: 0 0 15px rgba(0, 255, 255, 0.6); }
    }
    
    @keyframes shimmer {
        0% { background-position: -1000px 0; }
        100% { background-position: 1000px 0; }
    }
    
    @keyframes gentleGlow {
        0%, 100% { box-shadow: 0 0 8px rgba(0, 208, 255, 0.15); }
        50% { box-shadow: 0 0 15px rgba(0, 208, 255, 0.25); }
    }
    
    @keyframes buttonGlow {
        0%, 100% { box-shadow: 0 0 10px rgba(0, 132, 208, 0.4), inset 0 0 10px rgba(0, 132, 208, 0.2); }
        50% { box-shadow: 0 0 20px rgba(0, 208, 255, 0.7), inset 0 0 15px rgba(0, 208, 255, 0.3), 0 0 30px rgba(0, 255, 213, 0.3); }
    }
    
    @keyframes inputFocus {
        0% { box-shadow: 0 0 5px rgba(0, 208, 255, 0.3); }
        50% { box-shadow: 0 0 15px rgba(0, 255, 213, 0.5), inset 0 0 10px rgba(0, 208, 255, 0.2); }
        100% { box-shadow: 0 0 25px rgba(0, 208, 255, 0.6), inset 0 0 15px rgba(0, 208, 255, 0.3); }
    }
    
    @keyframes borderGlow {
        0%, 100% { border-color: #00d0ff; box-shadow: 0 0 10px rgba(0, 208, 255, 0.3); }
        50% { border-color: #00ffff; box-shadow: 0 0 20px rgba(0, 255, 255, 0.6), inset 0 0 10px rgba(0, 255, 255, 0.1); }
    }
    
    @keyframes floatUp {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
    }
    
    @keyframes colorShift {
        0% { color: #00d0ff; }
        50% { color: #00ffff; }
        100% { color: #00d0ff; }
    }
    
    body {
        background: linear-gradient(-45deg, #0d0d0d, #1a1f2e, #0d0d0d, #1a1a2e);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
    }
    
    h1 {
        animation: fadeIn 0.8s ease-out, titleGlow 3s ease-in-out infinite;
    }
    
    .stat-card {
        animation: slideInCard 0.6s ease-out backwards;
        transition: all 0.3s ease;
    }
    
    .stat-card:nth-child(1) { animation-delay: 0.1s; }
    .stat-card:nth-child(2) { animation-delay: 0.2s; }
    .stat-card:nth-child(3) { animation-delay: 0.3s; }
    .stat-card:nth-child(4) { animation-delay: 0.4s; }
    
    .stat-card:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 15px 40px rgba(0, 208, 255, 0.4);
        border-left-color: #00ffff;
    }
    
    .card {
        animation: slideInCard 0.7s ease-out backwards;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
    }
    
    #container > .card:nth-child(1) { animation-delay: 0.1s; }
    #container > .card:nth-child(2) { animation-delay: 0.2s; }
    #container > .card:nth-child(3) { animation-delay: 0.3s; }
    #container > .card:nth-child(4) { animation-delay: 0.4s; }
    #container > .card:nth-child(5) { animation-delay: 0.5s; }
    #container > .card:nth-child(6) { animation-delay: 0.6s; }
    #container > .card:nth-child(7) { animation-delay: 0.7s; }
    
    .card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 208, 255, 0.4), inset 0 0 20px rgba(0, 255, 213, 0.1);
        background: linear-gradient(135deg, #1a1a1a 0%, #1a2a3a 100%);
        animation: glowPulse 2s ease-in-out infinite;
    }
    
    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
        animation: shimmer 3s infinite;
    }
    
    .card h2 {
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
    }
    
    .card:hover h2 {
        color: #00ffff;
        transform: scale(1.08) translateY(-2px);
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
    }
    
    canvas {
        animation: fadeIn 1s ease-out 0.3s both;
        filter: drop-shadow(0 0 5px rgba(0, 208, 255, 0.2));
    }
    
    .loading-skeleton {
        background: linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%);
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
        border-radius: 8px;
    }
    
    table tr {
        animation: none;
    }
    
    table tr:nth-child(1) { animation-delay: 0s; }
    table tr:nth-child(2) { animation-delay: 0s; }
    table tr:nth-child(3) { animation-delay: 0s; }
    table tr:nth-child(4) { animation-delay: 0s; }
    table tr:nth-child(5) { animation-delay: 0s; }
    
    table tr:hover {
        background: #1f2f3f !important;
        box-shadow: inset 0 0 8px rgba(0, 208, 255, 0.15);
        transform: none;
        transition: all 0.2s ease;
    }
    
    .service-row {
        animation: fadeIn 0.4s ease-out;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
    }
    
    .service-row:hover {
        border-left-color: #00ffd5;
    }
    
    .service-restart-btn {
        background: radial-gradient(circle at 30% 30%, #00ffff, #00d0ff);
        border: 2px solid #00ffd5;
        color: #000;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 0 15px rgba(0, 255, 213, 0.4), inset 0 0 10px rgba(0, 255, 255, 0.2);
        padding: 0;
        margin: 0 auto;
        line-height: 1;
        animation: buttonGlow 3s ease-in-out infinite;
    }
    
    .service-restart-btn:hover {
        background: radial-gradient(circle at 30% 30%, #00ffff, #00ffd5);
        transform: scale(1.15) rotate(180deg);
        box-shadow: 0 0 25px rgba(0, 255, 213, 0.8), inset 0 0 15px rgba(0, 255, 255, 0.4), 0 0 35px rgba(0, 208, 255, 0.5);
        border-color: #00ffff;
    }
    
    .service-restart-btn:active {
        transform: scale(0.95);
        box-shadow: 0 0 10px rgba(0, 255, 213, 0.6), inset 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    table th:first-child {
        border-top-left-radius: 8px;
    }
    
    table th:last-child {
        border-top-right-radius: 8px;
    }
    
    table th::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: none;
    }
    
    @keyframes tableHeaderShine {
        0% { left: -100%; }
        50% { left: 100%; }
        100% { left: 100%; }
    }
    
    button {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
    }
    
    button::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }
    
    button:active::before {
        width: 300px;
        height: 300px;
    }
    
    .facebook-section {
        animation: fadeIn 1s ease-out;
    }
    
    .file-input-label:hover {
        animation: none;
    }
    
    @media (max-width: 768px) { 
        #container { grid-template-columns: 1fr; } 
        #services { grid-column: span 1; } 
        .stats { grid-template-columns: 1fr; }
        .card:hover { transform: translateY(-8px) scale(1.01); }
    }
</style>
</head>
<body>

<div class="password-modal" id="password-modal">
    <div class="password-modal-content">
        <h3 id="password-title">üîí Enter Password</h3>
        <input type="password" id="password-input" class="password-input-field" placeholder="Enter password..." autocomplete="off">
        <div class="password-modal-buttons">
            <button class="password-btn-submit" onclick="submitPassword()">Submit</button>
            <button class="password-btn-cancel" onclick="cancelPassword()">Cancel</button>
        </div>
    </div>
</div>

<div class="header-wrapper">
    <div class="profile-image-container">
        <div class="profile-image-inner">
            <img src="profile.jpg" alt="MS IT Solutions" loading="lazy">
        </div>
    </div>
    <div>
        <h1>Facebook Automation Dashboard ‚Äî 2025</h1>
        <p style="text-align: center; margin: 8px 0 0 0; color: #00ffff; font-size: 14px; letter-spacing: 1px; font-weight: 500; text-shadow: 0 0 10px rgba(0, 208, 255, 0.3);">MS IT Solutions ‚Ä¢ Cloud & DevOps</p>
    </div>
</div>

<!-- Quick Stats Section -->
<div class="stats">
  <div class="stat-card">
    <h3>üíæ RAM</h3>
    <p id="ram-info">Loading...</p>
  </div>
  <div class="stat-card">
    <h3>‚ö° CPU</h3>
    <p id="cpu-info">Loading...</p>
  </div>
  <div class="stat-card">
    <h3>üíø Hard Disk</h3>
    <p id="disk-info">Loading...</p>
  </div>
  <div class="stat-card">
    <h3>üåê Network</h3>
    <p id="network-info">Loading...</p>
  </div>
</div>

<div id="container">

    <!-- CPU -->
    <div class="card">
        <h2>CPU Usage</h2>
        <canvas id="cpuChart"></canvas>
    </div>

    <!-- RAM -->
    <div class="card">
        <h2>RAM Usage</h2>
        <canvas id="ramChart"></canvas>
    </div>

    <!-- DISK -->
    <div class="card">
        <h2>Disk Usage</h2>
        <canvas id="diskChart"></canvas>
    </div>

    <!-- NETWORK -->
    <div class="card">
        <h2>Network (Real‚ÄëTime)</h2>
        <canvas id="netChart"></canvas>
    </div>

    <!-- CONTROL BUTTONS -->
    <div class="card" style="grid-column: span 1;">
        <h2>Server Controls</h2>
        <div class="control-buttons-container">
            <button class="control-btn cleanup" onclick="cleanupDisk()">üóëÔ∏è Clean Disk</button>
            <button class="control-btn" onclick="restartServer()">üîÑ Restart</button>
        </div>
    </div>

    </div>

    <!-- SERVICES + FACEBOOK LAYOUT -->
    <div class="main-layout">
        <!-- SERVICES TABLE -->
        <div class="services-column">
            <div class="card" id="services">
                <h2>Active Services</h2>
                <table id="servicesTable">
                    <tr>
                        <th>Proto</th>
                        <th>Local Address</th>
                        <th>State</th>
                        <th>PID/Program</th>
                    </tr>
                </table>
            </div>
        </div>

        <!-- FACEBOOK MANAGEMENT SECTION -->
        <div class="facebook-column">
            <div class="facebook-card-wrapper">
            <h2>üì± Facebook</h2>
            <div class="facebook-section">
            <h3>üì± Facebook Posting & Groups Management</h3>
            
            <!-- Token Status -->
            <div style="margin-bottom: 15px; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                <button onclick="validateTokens()" style="background: #1877f2; color: #fff; width: 100%; padding: 8px; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">üîç Check Facebook Tokens</button>
                <p id="token-status" style="font-size: 11px; color: #888; margin: 8px 0;"></p>
            </div>

            <!-- Post to Page -->
            <div style="margin-bottom: 15px;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                  <img id="page-profile-pic" src="" alt="Page Profile" style="width: 50px; height: 50px; border-radius: 50%; background: #1a1a1a; border: 2px solid #00ffd5; object-fit: cover; display: none;">
                  <h4 style="color: #00ffd5; margin: 0; flex: 1;">üìÑ Post to IT-Solutions Page</h4>
                </div>
                <input type="text" id="fb-message" placeholder="Enter your message..." style="width: 100%; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #333; background: #1a1a1a; color: #fff; box-sizing: border-box;">
                <input type="text" id="fb-link" placeholder="Optional link..." style="width: 100%; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #333; background: #1a1a1a; color: #fff; box-sizing: border-box;">
                <div class="file-input-wrapper">
                  <label class="file-input-label" id="photo-label">
                    <input type="file" id="fb-photo" accept="image/*">
                    <div class="file-input-box" id="photo-box">
                      <i class="fas fa-camera"></i>
                      <div class="file-label-text">üì∑ Add Photo</div>
                      <div class="file-label-info">Click or drag</div>
                      <img id="photo-preview" class="file-preview" style="display: none;">
                      <div class="file-info-box" id="photo-info" style="display: none;"></div>
                    </div>
                  </label>
                  <label class="file-input-label" id="video-label">
                    <input type="file" id="fb-video" accept="video/*">
                    <div class="file-input-box" id="video-box">
                      <i class="fas fa-video"></i>
                      <div class="file-label-text">üé• Add Video</div>
                      <div class="file-label-info">Click or drag</div>
                      <img id="video-preview" class="file-preview" style="display: none;">
                      <div class="file-info-box" id="video-info" style="display: none;"></div>
                    </div>
                  </label>
                </div>
                <div class="upload-progress-container" id="upload-progress-container">
                  <div class="upload-progress-bar" id="upload-progress-bar"></div>
                  <div class="upload-progress-text" id="upload-progress-text">0%</div>
                </div>
                <button onclick="postToFacebook()" style="background: #1877f2; color: #fff; width: 100%; padding: 10px; border: none; border-radius: 5px; cursor: pointer; margin: 8px 0; font-weight: 600;">üì§ Post to Page</button>
                <button onclick="testNotification()" style="background: linear-gradient(135deg, #00ffd5, #00d0ff); color: #000; width: 100%; padding: 10px; border: none; border-radius: 5px; cursor: pointer; margin: 8px 0; font-weight: 600;">üß™ AutoSyncNotify</button>
                <p id="fb-status" style="font-size: 11px; color: #888; margin: 5px 0;"></p>
            </div>

            <!-- Scheduled Posts Section -->
            <div style="background:#1a1a1a; padding:20px; border-radius:12px; margin:20px 0;">
              <h3 style="color:#00ffd5;">üìÖ ÿ¨ÿØŸàŸÑÿ© ÿ®Ÿàÿ≥ÿ™ ÿ¨ÿØŸäÿØ</h3>
              <textarea id="sched-message" placeholder="ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©" style="width:100%; height:80px; background:#000; color:#fff; border:1px solid #00d0ff; border-radius:8px; padding:10px; box-sizing:border-box; margin:10px 0;"></textarea>
              <input type="datetime-local" id="sched-time" style="width:100%; margin:10px 0; padding:10px; background:#000; color:#fff; border:1px solid #00d0ff; border-radius:8px; box-sizing:border-box;">
              <input type="text" id="sched-link" placeholder="ŸÑŸäŸÜŸÉ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)" style="width:100%; margin:10px 0; padding:10px; background:#000; color:#fff; border:1px solid #00d0ff; border-radius:8px; box-sizing:border-box;">
              <button onclick="schedulePost()" style="background:#00d0ff; color:#000; padding:12px 24px; border:none; border-radius:8px; font-weight:bold; width:100%; cursor:pointer; margin-top:10px;">ÿ¨ÿØŸàŸÑÿ© ÿßŸÑÿ®Ÿàÿ≥ÿ™</button>
              <p id="sched-status" style="font-size: 11px; color: #888; margin: 10px 0;"></p>
            </div>

            <!-- Groups Section -->
            <div>
                <button class="dropdown-toggle" onclick="toggleGroupsDropdown()">üë• Post to Facebook Groups</button>
                <div id="groups-dropdown" class="dropdown-content">
                    <div style="margin-bottom: 10px; padding: 8px; background: #1a1a1a; border-radius: 5px;">
                        <h5 style="color: #00ffd5; margin: 0 0 8px 0; font-size: 12px;">Method 1: Auto-Sync (if available)</h5>
                        <button onclick="autoSyncGroups()" style="background: #1877f2; color: #fff; width: 100%; padding: 8px; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">üîÑ Auto-Sync Groups</button>
                        <div id="groups-status" style="margin-top: 8px; max-height: 150px; overflow-y: auto; font-size: 11px; color: #888;"></div>
                    </div>

                    <div style="margin-bottom: 10px; padding: 8px; background: #1a1a1a; border-radius: 5px;">
                        <h5 style="color: #00ffd5; margin: 0 0 8px 0; font-size: 12px;">Method 2: Manual Group IDs</h5>
                        <textarea id="manual-group-ids" placeholder="Enter Group IDs (comma or line separated)&#10;Example: 123456789, 987654321" style="width: 100%; height: 50px; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #333; background: #0a0a0a; color: #fff; font-family: monospace; font-size: 11px; box-sizing: border-box;"></textarea>
                        <button onclick="loadManualGroups()" style="background: #1877f2; color: #fff; width: 100%; padding: 8px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 8px;">Load Group IDs</button>
                    </div>
                    
                    <select id="groups-select" style="width: 100%; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #333; background: #1a1a1a; color: #fff; box-sizing: border-box;">
                        <option value="">Select a group to post to...</option>
                    </select>
                    
                    <textarea id="group-message" placeholder="Enter message for group..." style="width: 100%; height: 60px; padding: 8px; margin: 8px 0; border-radius: 5px; border: 1px solid #333; background: #1a1a1a; color: #fff; box-sizing: border-box;"></textarea>
                    
                    <button onclick="postToSelectedGroup()" style="background: #1877f2; color: #fff; width: 100%; padding: 8px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">üì§ Post to Selected Group</button>
                    
                    <p id="group-post-status" style="font-size: 11px; color: #888; margin-top: 8px;"></p>
                </div>
            </div>
        </div>
    </div>
            </div>
            </div>
        </div>
    </div>

<footer>
    <div class="social-container">
        <a href="https://kutt.it/SolutionsFB" target="_blank" class="social-btn facebook-btn">
            <i class="fab fa-facebook"></i> Facebook
        </a>
        <a href="https://kutt.it/SolutionsYT" target="_blank" class="social-btn youtube-btn">
            <i class="fab fa-youtube"></i> YouTube
        </a>
        <a href="https://kutt.it/SolutionsTT" target="_blank" class="social-btn tiktok-btn">
            <i class="fab fa-tiktok"></i> TikTok
        </a>
        <a href="https://kutt.it/SolutionsIG" target="_blank" class="social-btn instagram-btn">
            <i class="fab fa-instagram"></i> Instagram
        </a>
        <a href="https://github.com/Mohamedsafwat93" target="_blank" class="social-btn github-btn">
            <i class="fab fa-github"></i> GitHub
        </a>
        <a href="https://wa.me/201127008149" target="_blank" class="social-btn whatsapp-btn">
            <i class="fab fa-whatsapp"></i> WhatsApp
        </a>
    </div>
    <p>Made with <span class="heart">‚ù§Ô∏è</span> by Eng. Muhammed Safwat &copy; 2025</p>
</footer>

<script>
function gradient(ctx, c1, c2) {
    let g = ctx.createLinearGradient(0, 0, 0, 250);
    g.addColorStop(0, c1);
    g.addColorStop(1, c2);
    return g;
}

let cpuChart, ramChart, diskChart, netChart;

async function loadStats() {
    try {
        const res = await fetch("/api/stats?t=" + Date.now());
        const data = await res.json();

        let cpu = data.cpu?.usage || 0;
        let ram = ((data.ram.used / data.ram.total) * 100).toFixed(1);
        let disk = data.disk && data.disk[0] ? ((data.disk[0].used / data.disk[0].size) * 100).toFixed(1) : 0;
        let net = Math.floor(Math.random() * 100);

        updateChart("cpuChart", "CPU Usage", cpu, cpuChart, x => cpuChart = x, "#ff2a2a", "#ff7b00");
        updateChart("ramChart", "RAM Usage", ram, ramChart, x => ramChart = x, "#00ff62", "#00d9ff");
        updateChart("diskChart", "Disk Usage", disk, diskChart, x => diskChart = x, "#c300ff", "#ff009d");
        updateChart("netChart", "Network Speed", net, netChart, x => netChart = x, "#00c8ff", "#003cff");

        updateServices(data.services || []);
    } catch(e) {
        console.error("Error loading stats:", e);
    }
}

function updateChart(id, label, value, instance, saveFn, c1, c2) {
    const ctx = document.getElementById(id).getContext("2d");

    const chartPlugin = {
        id: 'textCenter',
        beforeDatasetsDraw(chart) {
            const { ctx, chartArea: { left, top, width, height } } = chart;
            ctx.save();
            
            const centerX = left + width / 2;
            const centerY = top + height / 2;
            
            ctx.font = 'bold 36px Arial';
            ctx.fillStyle = '#00ffd5';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = 'rgba(0, 255, 213, 0.5)';
            ctx.shadowBlur = 15;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            
            ctx.fillText(Math.round(value) + '%', centerX, centerY);
            ctx.restore();
        }
    };

    if (!instance) {
        saveFn(new Chart(ctx, {
            type: "doughnut",
            data: {
                labels: ["Used", "Free"],
                datasets: [{
                    data: [value, 100 - value],
                    backgroundColor: [gradient(ctx, c1, c2), "#2a2a2a"],
                    borderWidth: 0
                }]
            },
            options: {
                cutout: "70%",
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    tooltip: { enabled: true },
                    title: {
                        display: true,
                        text: label,
                        color: "#fff",
                        font: { size: 18 }
                    },
                    textCenter: {}
                }
            },
            plugins: [chartPlugin]
        }));
    } else {
        instance.data.datasets[0].data = [value, 100 - value];
        instance.update();
    }
}

function updateServices(list) {
    let table = document.getElementById("servicesTable");
    
    // Check if header exists, if not add it
    if (table.rows.length === 0) {
        const headerRow = table.insertRow();
        const headers = ['Proto', 'Local Address', 'State', 'PID/Program', '‚ü≥ RestartService'];
        headers.forEach((text, idx) => {
            const th = document.createElement('th');
            th.textContent = text;
            if (idx === 4) {
                th.style.fontSize = '11px';
                th.style.letterSpacing = '1px';
            }
            headerRow.appendChild(th);
        });
    }
    
    // Remove old service rows (keep header)
    while (table.rows.length > 1) {
        table.deleteRow(1);
    }

    if (list && list.length > 0) {
        list.forEach((s, idx) => {
            const row = table.insertRow();
            row.className = 'service-row';
            row.innerHTML = `
                <td>${s.proto || 'N/A'}</td>
                <td>${s.localAddress || 'N/A'}</td>
                <td>${s.state || 'N/A'}</td>
                <td>${s.pid_program || 'N/A'}</td>
                <td><button class="service-restart-btn" onclick="restartService('${s.pid_program}', ${idx})" title="Restart Service">‚ü≥</button></td>
            `;
        });
    } else {
        const row = table.insertRow();
        row.innerHTML = '<td colspan="5">No services data available</td>';
    }
}

async function restartService(pidProgram, idx) {
    if(!pidProgram || pidProgram === 'N/A' || pidProgram === '-') {
        alert('‚ö†Ô∏è Cannot restart this service - no PID available');
        return;
    }
    
    const confirmed = confirm(`Restart service: ${pidProgram}?`);
    if(!confirmed) return;
    
    try {
        const res = await fetch('/api/restart-service', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ pid_program: pidProgram })
        });
        
        const data = await res.json();
        if(res.ok) {
            alert(`‚úÖ Service restarted: ${pidProgram}`);
            loadStats();
        } else {
            alert(`‚ùå Error: ${data.error}`);
        }
    } catch(e) {
        alert(`‚ùå Error: ${e.message}`);
    }
}

let passwordCallback = null;

function showPasswordDialog(title, callback) {
    passwordCallback = callback;
    document.getElementById('password-title').innerText = title;
    document.getElementById('password-input').value = '';
    document.getElementById('password-modal').classList.add('active');
    document.getElementById('password-input').focus();
}

function submitPassword() {
    const password = document.getElementById('password-input').value;
    if(password === "") {
        alert("‚ùå Password cannot be empty");
        return;
    }
    document.getElementById('password-modal').classList.remove('active');
    if(passwordCallback) {
        passwordCallback(password);
    }
}

function cancelPassword() {
    document.getElementById('password-modal').classList.remove('active');
    passwordCallback = null;
}

async function testNotification() {
    try {
        const res = await fetch('/api/test-notification', { method: 'POST' });
        const data = await res.json();
        if (res.ok) {
            alert('‚úÖ ' + data.message);
        } else {
            alert('‚ùå Error: ' + data.error);
        }
    } catch (error) {
        alert('‚ùå Error: ' + error.message);
    }
}

async function schedulePost() {
    const message = document.getElementById('sched-message').value;
    const time = document.getElementById('sched-time').value;
    const link = document.getElementById('sched-link').value;
    const statusEl = document.getElementById('sched-status');

    if (!message || !time) {
        statusEl.textContent = '‚ùå ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸàÿßŸÑŸàŸÇÿ™ ŸÖÿ∑ŸÑŸàÿ®ŸäŸÜ';
        statusEl.style.color = '#ff4444';
        return;
    }

    const form = new FormData();
    form.append('message', message);
    form.append('schedule_time', time);
    if (link) form.append('link', link);

    try {
        const res = await fetch('/api/schedule-post', { method: 'POST', body: form });
        const data = await res.json();
        
        if (res.ok) {
            statusEl.textContent = '‚úÖ ' + data.message;
            statusEl.style.color = '#00ff62';
            document.getElementById('sched-message').value = '';
            document.getElementById('sched-time').value = '';
            document.getElementById('sched-link').value = '';
        } else {
            statusEl.textContent = '‚ùå ' + (data.error || 'ÿÆÿ∑ÿ£');
            statusEl.style.color = '#ff4444';
        }
    } catch (error) {
        statusEl.textContent = '‚ùå ÿÆÿ∑ÿ£: ' + error.message;
        statusEl.style.color = '#ff4444';
    }
}

function formatFileSize(bytes) {
    if(bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
}

function setupFileUploadHandlers(fileInputId, labelId, boxId, previewId, infoId, type) {
    const fileInput = document.getElementById(fileInputId);
    const label = document.getElementById(labelId);
    const box = document.getElementById(boxId);
    const preview = document.getElementById(previewId);
    const info = document.getElementById(infoId);
    
    fileInput.addEventListener('change', function() {
        if(this.files.length > 0) {
            const file = this.files[0];
            updateFileDisplay(file, box, preview, info, type);
        }
    });
    
    label.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.stopPropagation();
        label.classList.add('drag-over');
        box.style.transform = 'scale(1.05)';
    });
    
    label.addEventListener('dragleave', (e) => {
        e.preventDefault();
        e.stopPropagation();
        label.classList.remove('drag-over');
        box.style.transform = 'scale(1)';
    });
    
    label.addEventListener('drop', (e) => {
        e.preventDefault();
        e.stopPropagation();
        label.classList.remove('drag-over');
        box.style.transform = 'scale(1)';
        
        const files = e.dataTransfer.files;
        if(files.length > 0) {
            fileInput.files = files;
            const file = files[0];
            updateFileDisplay(file, box, preview, info, type);
        }
    });
}

function updateFileDisplay(file, box, preview, info, type) {
    box.classList.add('has-file');
    preview.style.display = 'none';
    info.style.display = 'block';
    
    let infoHTML = `
        <div class="file-info-text"><strong>üìÅ ${file.name}</strong></div>
        <div class="file-info-text">üìä Size: ${formatFileSize(file.size)}</div>
        <div class="file-info-text">üìù Type: ${file.type}</div>
    `;
    
    if(type === 'image' && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
        infoHTML += '<div class="file-info-text">‚úÖ Ready to upload</div>';
    } else if(type === 'video' && file.type.startsWith('video/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
        infoHTML += '<div class="file-info-text">‚úÖ Ready to upload</div>';
    }
    
    infoHTML += `<button class="file-clear-btn" onclick="clearFileUpload('${box.id}')">‚úï Clear</button>`;
    info.innerHTML = infoHTML;
}

function clearFileUpload(boxId) {
    const box = document.getElementById(boxId);
    const label = box.closest('.file-input-label');
    const fileInput = label.querySelector('input[type="file"]');
    const preview = box.querySelector('.file-preview');
    const info = box.querySelector('.file-info-box');
    
    fileInput.value = '';
    preview.style.display = 'none';
    info.style.display = 'none';
    box.classList.remove('has-file');
}

document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('password-input').addEventListener('keypress', function(e) {
        if(e.key === 'Enter') {
            submitPassword();
        } else if(e.key === 'Escape') {
            cancelPassword();
        }
    });
    
    setupFileUploadHandlers('fb-photo', 'photo-label', 'photo-box', 'photo-preview', 'photo-info', 'image');
    setupFileUploadHandlers('fb-video', 'video-label', 'video-box', 'video-preview', 'video-info', 'video');
});

function restartServer() {
    showPasswordDialog('üîí Enter password to restart server:', function(password) {
        fetch("/api/restart", { 
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ password: password })
        })
        .then(res => res.json())
        .then(data => {
            if(data.error) {
                alert("‚ùå " + data.error);
            } else {
                alert("‚úÖ " + data.message);
            }
        })
        .catch(err => alert("‚ùå Error: " + err.message));
    });
}

function cleanupDisk() {
    showPasswordDialog('üîí Enter password to cleanup disk cache:', function(password) {
        fetch("/api/cleanup", { 
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ password: password })
        })
        .then(res => res.json())
        .then(data => {
            if(data.error) {
                alert("‚ùå " + data.error);
            } else {
                let message = "‚úÖ " + data.message + "\n\n";
                if(data.results) {
                    message += data.results.join("\n");
                }
                alert(message);
            }
        })
        .catch(err => alert("‚ùå Error: " + err.message));
    });
}

async function postToFacebook() {
    const message = document.getElementById('fb-message').value.trim();
    const link = document.getElementById('fb-link').value.trim();
    const photoFile = document.getElementById('fb-photo').files[0];
    const videoFile = document.getElementById('fb-video').files[0];
    const statusEl = document.getElementById('fb-status');
    const progressContainer = document.getElementById('upload-progress-container');
    const progressBar = document.getElementById('upload-progress-bar');
    const progressText = document.getElementById('upload-progress-text');
    
    if(!message) {
        statusEl.innerText = '‚ùå Message cannot be empty';
        return;
    }
    
    statusEl.innerText = '‚è≥ Publishing...';
    progressContainer.classList.add('active');
    progressBar.style.width = '0%';
    progressText.innerText = '0%';
    
    try {
        const formData = new FormData();
        formData.append('message', message);
        if(link) formData.append('link', link);
        if(photoFile) formData.append('photo', photoFile);
        if(videoFile) formData.append('video', videoFile);
        
        // Animate progress smoothly
        let progress = 5;
        const progressInterval = setInterval(() => {
            if(progress < 85) {
                progress += Math.random() * 25;
                if(progress > 85) progress = 85;
            } else {
                progress += Math.random() * 10;
                if(progress > 95) progress = 95;
            }
            progressBar.style.width = progress + '%';
            progressText.innerText = Math.floor(progress) + '%';
        }, 150);
        
        const response = await fetch("/api/facebook/post", {
            method: "POST",
            body: formData
        });
        
        clearInterval(progressInterval);
        progressBar.style.width = '100%';
        progressText.innerText = '100%';
        
        const data = await response.json();
        
        if(data.success) {
            statusEl.innerText = '‚úÖ ' + data.message;
            document.getElementById('fb-message').value = '';
            document.getElementById('fb-link').value = '';
            document.getElementById('fb-photo').value = '';
            document.getElementById('fb-video').value = '';
            setTimeout(() => { 
                statusEl.innerText = ''; 
                progressContainer.classList.remove('active');
            }, 3000);
        } else {
            statusEl.innerText = '‚ùå ' + (data.error || 'Failed to post');
            progressContainer.classList.remove('active');
        }
    } catch(err) {
        statusEl.innerText = '‚ùå Error: ' + err.message;
        progressContainer.classList.remove('active');
    }
}

async function autoSyncGroups() {
    const statusEl = document.getElementById('groups-status');
    const selectEl = document.getElementById('groups-select');
    statusEl.innerHTML = '‚è≥ Syncing your Facebook groups...';
    
    try {
        const response = await fetch('/api/facebook/auto-groups');
        const data = await response.json();
        
        if(!response.ok) {
            statusEl.innerHTML = '‚ùå ' + (data.error || 'Failed to sync groups');
            if(data.suggestion) {
                statusEl.innerHTML += '<br><small style="color: #ffaa00;">' + data.suggestion + '</small>';
            }
            return;
        }
        
        if(data.groups && data.groups.length > 0) {
            // Populate dropdown
            selectEl.innerHTML = '<option value="">Select a group to post to...</option>';
            data.groups.forEach(group => {
                const option = document.createElement('option');
                option.value = group.id;
                option.text = group.name + ' (' + (group.member_count || 0) + ' members)';
                option.dataset.name = group.name;
                selectEl.appendChild(option);
            });
            
            // Update status
            statusEl.innerHTML = `<p style="color: #00ff62;">‚úÖ Synced ${data.total} groups successfully!</p>`;
            
            // Show group list
            let html = '<div style="margin-top: 10px;">';
            data.groups.forEach(group => {
                html += `<div style="background: #1a1a1a; padding: 8px; margin: 5px 0; border-radius: 5px; border-left: 3px solid #1877f2; font-size: 11px;">
                    <strong style="color: #00ffd5;">${group.name}</strong><br>
                    <small style="color: #888;">Members: ${group.member_count || 'N/A'} | Privacy: ${group.privacy || 'N/A'}</small>
                </div>`;
            });
            html += '</div>';
            statusEl.innerHTML = `<p style="color: #00ff62;">‚úÖ Synced ${data.total} groups! Select one above to post.</p>` + html;
        } else {
            statusEl.innerHTML = '‚ùå No groups found.<br><small style="color: #ffaa00;">Your token may not have "groups_manage" permission.<br>Try regenerating your Facebook token with full permissions.</small>';
        }
    } catch(err) {
        statusEl.innerHTML = '‚ùå Error: ' + err.message;
        console.error('Sync error:', err);
    }
}

function loadManualGroups() {
    const idsText = document.getElementById('manual-group-ids').value.trim();
    const selectEl = document.getElementById('groups-select');
    const statusEl = document.getElementById('group-post-status');
    
    if(!idsText) {
        statusEl.innerText = '‚ùå Please enter at least one group ID';
        return;
    }
    
    // Parse group IDs
    const groupIds = idsText.split(/[,\n]/).map(id => id.trim()).filter(id => id);
    
    if(groupIds.length === 0) {
        statusEl.innerText = '‚ùå No valid group IDs found';
        return;
    }
    
    // Clear and populate dropdown
    selectEl.innerHTML = '<option value="">Select a group to post to...</option>';
    groupIds.forEach(id => {
        const option = document.createElement('option');
        option.value = id;
        option.text = 'Group: ' + id;
        selectEl.appendChild(option);
    });
    
    statusEl.innerText = '‚úÖ Loaded ' + groupIds.length + ' group ID(s). Select one and post!';
}

async function postToSelectedGroup() {
    const selectEl = document.getElementById('groups-select');
    const groupId = selectEl.value;
    const message = document.getElementById('group-message').value.trim();
    const photoFile = document.getElementById('fb-photo')?.files[0];
    const videoFile = document.getElementById('fb-video')?.files[0];
    const statusEl = document.getElementById('group-post-status');
    
    if(!groupId) {
        statusEl.innerText = '‚ùå Please select a group';
        return;
    }
    
    if(!message) {
        statusEl.innerText = '‚ùå Please enter a message';
        return;
    }
    
    const groupName = selectEl.options[selectEl.selectedIndex].text;
    statusEl.innerText = '‚è≥ Posting to ' + groupName + '...';
    
    try {
        const formData = new FormData();
        formData.append('group_id', groupId);
        formData.append('message', message);
        if(photoFile) formData.append('photo', photoFile);
        if(videoFile) formData.append('video', videoFile);
        
        const response = await fetch('/api/facebook/group-post', {
            method: 'POST',
            body: formData
        });
        
        const data = await response.json();
        
        if(!response.ok || data.error) {
            statusEl.innerText = '‚ùå ' + (data.error || 'Failed to post');
            console.error('Post error:', data);
        } else {
            statusEl.innerText = '‚úÖ Posted successfully to ' + groupName + '!';
            document.getElementById('group-message').value = '';
            setTimeout(() => { statusEl.innerText = ''; }, 3000);
        }
    } catch(err) {
        statusEl.innerText = '‚ùå Error: ' + err.message;
        console.error('Fetch error:', err);
    }
}

function toggleGroupsDropdown() {
    const dropdown = document.getElementById('groups-dropdown');
    dropdown.classList.toggle('active');
}

async function validateTokens() {
    const statusEl = document.getElementById('token-status');
    statusEl.innerText = '‚è≥ Checking tokens...';
    
    try {
        const response = await fetch('/api/facebook/validate-token');
        const data = await response.json();
        
        let statusText = '';
        
        if(data.page_token?.valid) {
            statusText += '‚úÖ Page Token: Valid (' + data.page_token.name + ')\n';
        } else {
            statusText += '‚ùå Page Token: ' + (data.page_token?.error || 'Invalid');
            if(data.auto_page_token?.available) {
                statusText += ' (Using auto-generated page token)\n';
            } else {
                statusText += '\n';
            }
        }
        
        if(data.user_token?.valid) {
            statusText += '‚úÖ User Token: Valid (' + data.user_token.name + ')\n';
        } else {
            statusText += '‚ùå User Token: ' + (data.user_token?.error || 'Invalid') + '\n';
        }
        
        if(data.auto_page_token?.available) {
            statusText += '‚ú® Auto-Generated: Page found "' + data.auto_page_token.page_name + '" - Posting enabled!';
        }
        
        statusEl.innerHTML = statusText.replace(/\n/g, '<br>');
    } catch(err) {
        statusEl.innerText = '‚ùå Error: ' + err.message;
    }
}

function postToGroup(groupId, groupName) {
    const message = prompt(`üí¨ Enter message for "${groupName}":`);
    if(!message) return;
    
    fetch("/api/facebook/group-post", {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
            group_id: groupId,
            message: message
        })
    })
    .then(res => res.json())
    .then(data => {
        if(data.success) {
            alert('‚úÖ Posted to ' + groupName);
        } else {
            alert('‚ùå Error: ' + (data.error || 'Failed to post'));
        }
    })
    .catch(err => alert('‚ùå Error: ' + err.message));
}

// Load page profile picture on startup
async function loadPageProfilePicture() {
  try {
    const response = await fetch('/api/facebook/page-info');
    const data = await response.json();
    
    if(data.success && data.page.picture) {
      const img = document.getElementById('page-profile-pic');
      img.src = data.page.picture;
      img.style.display = 'block';
      img.title = data.page.name;
    }
  } catch(err) {
    console.log('Could not load page picture:', err.message);
  }
}

loadPageProfilePicture();

setInterval(loadStats, 1500);
loadStats();

// Quick Stats Update
async function updateQuickStats() {
  try {
    const res = await fetch("/api/server-stats?t=" + Date.now());
    const data = await res.json();

    const ramUsed = (data.ram.used / 1024 / 1024).toFixed(2);
    const ramTotal = (data.ram.total / 1024 / 1024).toFixed(2);
    const ramFree = (ramTotal - ramUsed).toFixed(2);
    document.getElementById('ram-info').innerText = `Used: ${ramUsed} MB\nFree: ${ramFree} MB\nTotal: ${ramTotal} MB`;

    document.getElementById('cpu-info').innerText = `Usage: ${data.cpu.percent}%\nCores: ${data.cpu.cores}`;

    const diskUsed = (data.disk.used / 1024 / 1024 / 1024).toFixed(2);
    const diskTotal = (data.disk.total / 1024 / 1024 / 1024).toFixed(2);
    const diskFree = (diskTotal - diskUsed).toFixed(2);
    document.getElementById('disk-info').innerText = `Used: ${diskUsed} GB\nFree: ${diskFree} GB\nTotal: ${diskTotal} GB`;
  } catch(e) {
    console.error('Quick stats error:', e);
  }
}

// Network Stats Update
async function updateNetworkStats() {
  try {
    const res = await fetch("/api/stats?t=" + Date.now());
    const data = await res.json();
    
    const net = data.network || { rx_sec: 0, tx_sec: 0 };
    const download = (net.rx_sec / 1024 / 1024).toFixed(2); // Convert to MB/s
    const upload = (net.tx_sec / 1024 / 1024).toFixed(2);   // Convert to MB/s
    const speed = (Math.max(parseFloat(download), parseFloat(upload))).toFixed(2);
    
    document.getElementById('network-info').innerText = `Download: ${download} MB/s\nUpload: ${upload} MB/s\nSpeed: ${speed} MB/s`;
  } catch(e) {
    console.error('Network stats error:', e);
  }
}

setInterval(updateQuickStats, 1000);
updateQuickStats();

setInterval(updateNetworkStats, 1000);
updateNetworkStats();
</script>

</body>
</html>
